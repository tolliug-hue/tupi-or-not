# üìÖ Journal de Bord du Projet (Trace Agile)

Ce document retrace les √©tapes de d√©veloppement, les livrables et les d√©fis techniques r√©solus au cours du processus Agile.

| Sprint | Objectif Principal | Livrables Cl√©s | D√©fis Techniques R√©solus |
| :--- | :--- | :--- | :--- |
| **0** | **Conception & Maquette** | Validation de la structure de la page (Header, Grille, Modale). Choix de la stack (Next.js/TS/Tailwind). | Configuration initiale de l'environnement de d√©veloppement (Node/npm/VS Code). |
| **1** | **Data & Squelette** | Connexion aux deux sources de donn√©es (Mixcloud/Archive.org). Affichage de la liste brute des √©missions. | **Bug Fix :** Probl√®me de lecture des colonnes CSV (accents/majuscules). |
| **2** | **Design & Lecteur** | Grille 5 colonnes, images carr√©es (`aspect-square`). Lecteur unifi√© (Modale) avec gestion des iFrames. | **Bug Fix :** Probl√®me d'affichage des images (Hotlinking/Cache) r√©solu par `referrerPolicy` et `player-widget.mixcloud.com`. |
| **3** | **UX & Recherche** | Impl√©mentation de la recherche instantan√©e (`SearchContext`). Ajout du bouton "X" pour r√©initialiser la recherche. Finalisation du design du Header (Logo, Slogan). | **UX Am√©lioration :** Passage du bouton "√âcouter" au lien "D√©tails" pour clarifier l'UX. |
| **4** | **Visualisation & Data Refactoring** | S√©paration des donn√©es en deux onglets (Emissions/Playlists). **Automatisation :** Impl√©mentation du script Google Apps Script pour l'auto-remplissage des genres. | **Data Refactoring :** Ligation des donn√©es Playlists/Emissions. Cr√©ation du `searchableText` pour la recherche multi-crit√®res. |
| **5** | **Exploration & UX Mobile** | Cr√©ation du composant `TagExplorer` (Accord√©on/Bascule Artiste/Genre). Am√©lioration de la modale (hauteur dynamique, fond transparent). Ajout des liens MusicBrainz/Discogs. | **UX Mobile :** Impl√©mentation de l'Accord√©on pour optimiser l'espace vertical sur mobile. **Bug Fix :** Probl√®me de typage `globalGenres` r√©solu. |
| **6** | **Finalisation & Documentation** | R√©vision compl√®te du code. Production des documents `README.md`, `ARCHITECTURE.md`, et `SPRINT_LOG.md`. | Nettoyage final du code de d√©bogage (`console.log`). |
| **7** | **Audit & Corrections Critiques** | Impl√©mentation de l'**ISR** (`revalidate = 3600`). Correction de la configuration `next.config.ts` (wildcard `*.archive.org`). Correction de l'erreur **Button in Button** (`TagExplorer`). | **Probl√®me Critique :** R√©solution du probl√®me N+1 (Mixcloud/Google Sheets) par l'ISR. **Accessibilit√© :** Correction de l'erreur d'hydratation (Button in Button). |
| **8** | **Performance & Accessibilit√© (Lighthouse)** | Score Lighthouse 95-100% (A11y, SEO, Best Practices). Pagination "Load More" (12 items). Optimisation LCP (Images). Conformit√© WCAG AA. | **Performance :** R√©duction drastique du TBT via pagination et rendu conditionnel (`TagExplorer`). **LCP :** Priorisation des images `next/image`. **A11y :** Correction des contrastes (`gray-600`) et optimisation JS (`transpilePackages`). |
| **9** | **Optimisation Bundle & Build** | S√©paration `types.ts` / `data.ts`. Configuration `browserslist` (ES2017+). Nettoyage des Polyfills. | **Bundle Size :** R√©duction du poids du JS client en isolant `papaparse` c√¥t√© serveur (via `types.ts`). **TBT :** Suppression du "Legacy JS" et des polyfills inutiles pour les navigateurs modernes. |
| **10** | **Mobile UX & Code Standards** | Correction du bug d'affichage Mixcloud sur mobile (Transparence). Suppression des attributs d√©pr√©ci√©s (`frameBorder`). | **Mobile UX :** D√©sactivation de l'autoplay (Mixcloud/Archive) pour respecter les politiques navigateurs et corriger l'UI mobile. **Clean Code :** Remplacement de `frameBorder` par des classes CSS Tailwind. |
| **11** | **Simplification UX & R√©tention** | Suppression du bouton "D√©tails" sur les cartes de la grille. | **UX Design :** Suppression de la redondance. L'objectif est de garder l'utilisateur dans l'application (Modale) plut√¥t que de l'envoyer vers les sites tiers (Mixcloud/Archive) d√®s la grille. |
| **12** | **Android Player Fix** | Correction du bug "Double Clic" sur le lecteur Archive.org (Android). | **Mobile Compatibility :** R√©int√©gration de la permission `allow="autoplay"` sur l'iframe Archive.org. N√©cessaire sur Android pour que le script de lecture s'ex√©cute au premier clic (m√™me sans autoplay activ√© dans l'URL). |
 **13** | **Branding & Identit√©** | Favicon, Apple Icon et Manifest Android. | **Identity :** Int√©gration compl√®te des ic√¥nes : `favicon.ico` (Legacy), `apple-icon.png` (iOS), `icon.png` (Android Tabs) et `manifest.ts` (Android Home Screen & PWA). |
| **14** | **Navigation Responsive & Identit√©** | Menu "Burger" minimaliste (Mobile). Header unifi√© (Desktop). Modale "√Ä propos". Logo cliquable. | **UX Mobile :** Menu Off-Canvas √©pur√© (Croix √† gauche, sans titres) et ajustement du slogan. **UX Desktop :** Int√©gration des liens secondaires dans le bandeau principal et **ajustement du layout (Sticky Header/Grille)**. **Content :** Ajout de la modale de pr√©sentation et du lien vers Radio Octopus. |
| **15** | **Official Launch** | Mise en place du nom de domaine `tupiornot.fr`. | **Infrastructure :** Configuration DNS (OVH + Vercel), redirection du `www`, et s√©curisation HTTPS. Mise √† jour de la documentation avec l'URL officielle. |
| **16** | **Finition Identit√© Mobile** | Mise √† jour des ic√¥nes d'application (`icon.png`, `apple-icon.png`) avec fond opaque. | **Mobile UI :** Remplacement des ic√¥nes √† fond transparent par des versions √† fond solide pour garantir la lisibilit√© sur Android (Mode Sombre) et √©viter le remplissage noir automatique sur iOS. |
| **17** | **SEO & Autorit√© de Domaine** | Configuration de l'URL Canonique (`metadataBase`). Protection contre le "Duplicate Content". | **SEO Technique :** Ajout de la balise `<link rel="canonical">` pour indiquer √† Google que `tupiornot.fr` est la seule source officielle, neutralisant ainsi l'impact n√©gatif du sous-domaine technique `vercel.app`. |
| **18** | **PWA & Android Polish** | Support des ic√¥nes adaptatives (Rondes) sur Android. | **Mobile UI :** Configuration de la propri√©t√© `maskable` dans le `manifest.ts` pour que l'ic√¥ne s'adapte aux formes du syst√®me Android (Rond/Carr√©). **Fix :** Contournement du typage TypeScript (`as any`) pour la propri√©t√© `purpose`. |
| **19** | **Data Performance (Archive.org)** | Optimisation radicale des images Archive.org (HD & Z√©ro API). | **Backend Logic :** Remplacement des appels API lents par une construction d'URL directe bas√©e sur une convention de nommage stricte (`TupiXX_itemimage.jpg`). Gain massif de performance au build et affichage syst√©matique des pochettes HD. |
| **20** | **UI Overhaul & Mobile Layout** | Refonte de la grille (2 colonnes mobile) et densification de l'interface. | **Mobile UX :** Passage √† une grille 2 colonnes sur mobile. **Simplification :** Suppression des badges "Source" et du bouton "D√©tails". **Densit√© :** Compactage des cartes (padding r√©duit, date noire) et du nuage de tags (taille police r√©duite, header compact) pour afficher plus de contenu. |
| **21** | **UX Polish & Pixel Perfect** | Finitions Modale, Sticky Header et alignements. | **Modal UI :** Architecture "Sandwich" (Header/Footer fixes) pour pr√©server les coins arrondis et centrage vertical du lecteur Archive. **Sticky Header :** Correction des sauts au scroll et de la transparence via marge n√©gative. **Grid :** Ajustement fin des espacements (`pt-1`) pour une int√©gration parfaite. |
| **22** | **Content & Layout** | Ajout du "Th√®me" sur les cartes et compactage UI. | **Content :** Int√©gration de la nouvelle colonne "Theme" du CSV. Affichage du th√®me sous le titre dans la grille et inclusion dans le moteur de recherche. **UI Design :** R√©duction des paddings cartes et ajustement des espacements globaux. |
| **23** | **Open Source & Legal** | Officialisation de l'Open Source (Licence MIT). | **Legal :** Synchronisation du d√©p√¥t (`git pull`) pour int√©grer le fichier LICENSE cr√©√© sur GitHub. Mise √† jour du README |
| **24** | **Listen Stats & Data Logic** | Stats d'√©coute (Mixcloud/Archive) et gestion via CSV. | **Backend :** R√©cup√©ration des stats via API Mixcloud et API Archive "Bulk". Gestion des √©missions migr√©es (Legacy) via une colonne CSV d√©di√©e. **UI :** Affichage du compteur avec une ic√¥ne "Play" minimaliste. |
| **25** | **Mobile Performance & A11y** | Optimisation images mobile et correction contrastes Header. | **Performance :** Correction `sizes` images (50vw mobile). **A11y :** Ajustement final des contrastes dans le Header (Slogan et Compteur en `gray-300`, Bordure en `gray-600`) pour valider le score 100% Lighthouse. |
| **26** | **Image Optimization Tuning** | Configuration fine des tailles d'images (`imageSizes`). | **Performance :** Ajout de breakpoints d'images personnalis√©s (256px, 384px) dans `next.config.ts` pour forcer Next.js √† g√©n√©rer des variantes plus petites, parfaitement adapt√©es √† la grille mobile (176px). |
| **27** | **Full Card Clickable** | Extension de la zone de clic √† toute la carte. | **UX Mobile :** Refonte de la structure des cartes (`EmissionList`) pour inclure l'image ET le texte dans un unique bouton cliquable. Am√©liore consid√©rablement l'ergonomie sur √©cran tactile (loi de Fitts). |
| **28** | **Code Cleanup & Documentation** | Refactoring, JSDoc et nettoyage du code mort. | **Maintenance :** Ajout de commentaires JSDoc pour l'IntelliSense. Suppression des `console.log` et du code comment√© obsol√®te. Organisation des imports et centralisation des constantes de configuration. |
| **29** | **Architecture Hardening** | S√©curisation du Build et fluidit√© Mobile. | **Time Bomb Fix :** Mise en place d'un cache de 24h sur les API externes et traitement par lots (`Promise.allSettled`) pour √©viter les timeouts Vercel. **Mobile Lag :** Ajout d'un `Debounce` (300ms) sur la recherche pour √©viter le gel de l'interface √† la frappe. |